# üìò API DOCUMENTATION - DENTAL CLINIC MANAGEMENT SYSTEM

**Base URL:** `http://localhost:8080/api/v1`  
**Authentication:** Bearer Token (JWT)  
**Date:** October 8, 2025

---

## üìë M·ª§C L·ª§C

1. [Authentication APIs](#1-authentication-apis)
2. [Employee Management APIs](#2-employee-management-apis)
3. [Patient Management APIs](#3-patient-management-apis)
4. [Role & Permission APIs](#4-role--permission-apis)
5. [Common Responses](#5-common-responses)
6. [Error Handling](#6-error-handling)

---

## 1. AUTHENTICATION APIs

### üîê 1.1. Login (ƒêƒÉng Nh·∫≠p)

**Endpoint:** `POST /auth/login`  
**Public:** ‚úÖ Kh√¥ng c·∫ßn token  
**Description:** ƒêƒÉng nh·∫≠p ƒë·ªÉ l·∫•y access token v√† refresh token

**Request Body:**
```json
{
  "username": "admin",
  "password": "DentalClinic@2025"
}
```

**Success Response (200 OK):**
```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "tokenType": "Bearer",
  "expiresIn": 900,
  "user": {
    "accountId": "880e8400-e29b-41d4-a716-446655440001",
    "username": "admin",
    "email": "admin@dentalclinic.com",
    "roles": ["Admin"],
    "permissions": ["CREATE_EMPLOYEE", "VIEW_EMPLOYEE", ...]
  }
}
```

**Error Response (401 Unauthorized):**
```json
{
  "type": "https://dentalclinic.com/problem/bad-credentials",
  "title": "Unauthorized",
  "status": 401,
  "message": "Invalid username or password"
}
```

---

### üîÑ 1.2. Refresh Token

**Endpoint:** `POST /auth/refresh-token`  
**Public:** ‚úÖ Kh√¥ng c·∫ßn token  
**Description:** L√†m m·ªõi access token khi h·∫øt h·∫°n

**Request Body:**
```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**Success Response (200 OK):**
```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "tokenType": "Bearer",
  "expiresIn": 900
}
```

---

### üö™ 1.3. Logout (ƒêƒÉng Xu·∫•t)

**Endpoint:** `POST /auth/logout`  
**Authorization:** ‚úÖ Required (Bearer Token)  
**Description:** ƒêƒÉng xu·∫•t v√† v√¥ hi·ªáu h√≥a token

**Request Body:**
```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**Success Response (200 OK):**
```json
{
  "message": "Logout successful"
}
```

---

## 2. EMPLOYEE MANAGEMENT APIs

### üë• 2.1. L·∫•y Danh S√°ch Nh√¢n Vi√™n

**Endpoint:** `GET /employees`  
**Authorization:** ‚úÖ Required  
**Permission:** `VIEW_EMPLOYEE` ho·∫∑c `ROLE_ADMIN`  
**Description:** L·∫•y danh s√°ch nh√¢n vi√™n v·ªõi ph√¢n trang, s·∫Øp x·∫øp, t√¨m ki·∫øm

**Query Parameters:**
| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| page | integer | ‚ùå | 0 | S·ªë trang (b·∫Øt ƒë·∫ßu t·ª´ 0) |
| size | integer | ‚ùå | 10 | S·ªë items m·ªói trang (max: 100) |
| sortBy | string | ‚ùå | employeeCode | Tr∆∞·ªùng s·∫Øp x·∫øp: `employeeCode`, `firstName`, `lastName`, `createdAt` |
| sortDirection | string | ‚ùå | ASC | H∆∞·ªõng s·∫Øp x·∫øp: `ASC`, `DESC` |
| search | string | ‚ùå | - | T√¨m ki·∫øm theo t√™n, m√£, email |
| roleId | string | ‚ùå | - | L·ªçc theo role ID |
| isActive | boolean | ‚ùå | true | L·ªçc nh√¢n vi√™n active/inactive |

**Request Example:**
```http
GET /employees?page=0&size=10&sortBy=firstName&sortDirection=ASC&search=Nguy·ªÖn
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Success Response (200 OK):**
```json
{
  "content": [
    {
      "employeeId": "990e8400-e29b-41d4-a716-446655440002",
      "employeeCode": "EMP002",
      "fullName": "Nguy·ªÖn VƒÉn A",
      "firstName": "VƒÉn A",
      "lastName": "Nguy·ªÖn",
      "phone": "0901234567",
      "dateOfBirth": "1985-05-15",
      "address": "123 Nguy·ªÖn Hu·ªá, Q1, TPHCM",
      "roleId": "550e8400-e29b-41d4-a716-446655440002",
      "roleName": "B√°c sƒ©",
      "isActive": true,
      "createdAt": "2025-10-08T10:00:00",
      "account": {
        "accountId": "880e8400-e29b-41d4-a716-446655440002",
        "username": "bs.nguyen.van.a",
        "email": "nguyen.van.a@dentalclinic.com",
        "status": "ACTIVE"
      },
      "specializations": [
        {
          "specializationId": "770e8400-e29b-41d4-a716-446655440001",
          "specializationCode": "SPEC001",
          "specializationName": "Ch·ªânh nha"
        }
      ]
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 10,
    "sort": { "sorted": true, "unsorted": false },
    "offset": 0,
    "paged": true,
    "unpaged": false
  },
  "totalElements": 25,
  "totalPages": 3,
  "last": false,
  "first": true,
  "size": 10,
  "number": 0,
  "numberOfElements": 10,
  "empty": false
}
```

---

### ‚ûï 2.2. T·∫°o Nh√¢n Vi√™n M·ªõi

**Endpoint:** `POST /employees`  
**Authorization:** ‚úÖ Required  
**Permission:** `CREATE_EMPLOYEE` ho·∫∑c `ROLE_ADMIN`  
**Description:** T·∫°o nh√¢n vi√™n m·ªõi v√† t·ª± ƒë·ªông t·∫°o account

**Request Body:**
```json
{
  "username": "bs.pham.van.e",
  "email": "pham.van.e@dentalclinic.com",
  "password": "Doctor@2025",
  "roleId": "550e8400-e29b-41d4-a716-446655440002",
  "firstName": "VƒÉn E",
  "lastName": "Ph·∫°m",
  "phone": "0905678901",
  "dateOfBirth": "1987-03-15",
  "address": "123 V√µ VƒÉn T·∫ßn, Q3, TPHCM",
  "specializationIds": [
    "770e8400-e29b-41d4-a716-446655440003",
    "770e8400-e29b-41d4-a716-446655440005"
  ]
}
```

**Field Validations:**
| Field | Type | Required | Validation |
|-------|------|----------|------------|
| username | string | ‚úÖ | 3-50 chars, unique |
| email | string | ‚úÖ | Valid email format, unique |
| password | string | ‚úÖ | Min 6 chars |
| roleId | string | ‚úÖ | Must exist in roles table |
| firstName | string | ‚úÖ | Max 50 chars |
| lastName | string | ‚úÖ | Max 50 chars |
| phone | string | ‚ùå | 10-15 digits |
| dateOfBirth | date | ‚ùå | Must be in the past |
| address | string | ‚ùå | Max 500 chars |
| specializationIds | array | ‚ùå | Valid specialization IDs |

**Success Response (201 Created):**
```json
{
  "employeeId": "uuid-generated",
  "employeeCode": "EMP006",
  "fullName": "Ph·∫°m VƒÉn E",
  "firstName": "VƒÉn E",
  "lastName": "Ph·∫°m",
  "phone": "0905678901",
  "dateOfBirth": "1987-03-15",
  "address": "123 V√µ VƒÉn T·∫ßn, Q3, TPHCM",
  "roleId": "550e8400-e29b-41d4-a716-446655440002",
  "roleName": "B√°c sƒ©",
  "isActive": true,
  "createdAt": "2025-10-08T14:30:00",
  "account": {
    "accountId": "uuid-generated",
    "username": "bs.pham.van.e",
    "email": "pham.van.e@dentalclinic.com",
    "status": "ACTIVE"
  },
  "specializations": [
    {
      "specializationId": "770e8400-e29b-41d4-a716-446655440003",
      "specializationCode": "SPEC003",
      "specializationName": "Nha chu"
    },
    {
      "specializationId": "770e8400-e29b-41d4-a716-446655440005",
      "specializationCode": "SPEC005",
      "specializationName": "Ph·∫´u thu·∫≠t h√†m m·∫∑t"
    }
  ]
}
```

**Error Response (400 Bad Request):**
```json
{
  "type": "https://dentalclinic.com/problem/username-exists",
  "title": "Bad Request",
  "status": 400,
  "message": "Username already exists"
}
```

---

### üîç 2.3. L·∫•y Th√¥ng Tin Chi Ti·∫øt Nh√¢n Vi√™n

**Endpoint:** `GET /employees/{employeeCode}`  
**Authorization:** ‚úÖ Required  
**Permission:** `VIEW_EMPLOYEE` ho·∫∑c `ROLE_ADMIN`

**Request Example:**
```http
GET /employees/EMP002
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Success Response (200 OK):**
```json
{
  "employeeId": "990e8400-e29b-41d4-a716-446655440002",
  "employeeCode": "EMP002",
  "fullName": "Nguy·ªÖn VƒÉn A",
  "firstName": "VƒÉn A",
  "lastName": "Nguy·ªÖn",
  "phone": "0901234567",
  "email": "nguyen.van.a@dentalclinic.com",
  "dateOfBirth": "1985-05-15",
  "address": "123 Nguy·ªÖn Hu·ªá, Q1, TPHCM",
  "roleId": "550e8400-e29b-41d4-a716-446655440002",
  "roleName": "B√°c sƒ©",
  "isActive": true,
  "createdAt": "2025-10-08T10:00:00",
  "account": {
    "accountId": "880e8400-e29b-41d4-a716-446655440002",
    "username": "bs.nguyen.van.a",
    "email": "nguyen.van.a@dentalclinic.com",
    "status": "ACTIVE"
  },
  "specializations": [...]
}
```

---

### ‚úèÔ∏è 2.4. C·∫≠p Nh·∫≠t Th√¥ng Tin Nh√¢n Vi√™n

**Endpoint:** `PATCH /employees/{employeeCode}`  
**Authorization:** ‚úÖ Required  
**Permission:** `UPDATE_EMPLOYEE` ho·∫∑c `ROLE_ADMIN`  
**Description:** C·∫≠p nh·∫≠t m·ªôt ph·∫ßn th√¥ng tin (ch·ªâ g·ª≠i fields c·∫ßn update)

**Request Body:**
```json
{
  "firstName": "VƒÉn A Updated",
  "phone": "0901111111",
  "address": "ƒê·ªãa ch·ªâ m·ªõi",
  "specializationIds": ["770e8400-e29b-41d4-a716-446655440001"]
}
```

**Success Response (200 OK):**
```json
{
  "employeeId": "990e8400-e29b-41d4-a716-446655440002",
  "employeeCode": "EMP002",
  "fullName": "Nguy·ªÖn VƒÉn A Updated",
  ...
}
```

---

### üóëÔ∏è 2.5. X√≥a Nh√¢n Vi√™n (Soft Delete)

**Endpoint:** `DELETE /employees/{employeeCode}`  
**Authorization:** ‚úÖ Required  
**Permission:** `DELETE_EMPLOYEE` ho·∫∑c `ROLE_ADMIN`  
**Description:** ƒê√°nh d·∫•u nh√¢n vi√™n l√† inactive (kh√¥ng x√≥a kh·ªèi DB)

**Request Example:**
```http
DELETE /employees/EMP002
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Success Response (200 OK):**
```json
{
  "message": "Employee EMP002 has been deactivated successfully"
}
```

---

## 3. PATIENT MANAGEMENT APIs

### üë§ 3.1. L·∫•y Danh S√°ch B·ªánh Nh√¢n

**Endpoint:** `GET /patients`  
**Authorization:** ‚úÖ Required  
**Permission:** `VIEW_PATIENT`  
**Description:** L·∫•y danh s√°ch b·ªánh nh√¢n v·ªõi ph√¢n trang, t√¨m ki·∫øm

**Query Parameters:**
| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| page | integer | ‚ùå | 0 | S·ªë trang (b·∫Øt ƒë·∫ßu t·ª´ 0) |
| size | integer | ‚ùå | 10 | S·ªë items m·ªói trang (max: 100) |
| sortBy | string | ‚ùå | patientCode | Tr∆∞·ªùng s·∫Øp x·∫øp |
| sortDirection | string | ‚ùå | ASC | `ASC`, `DESC` |
| search | string | ‚ùå | - | T√¨m ki·∫øm theo t√™n, m√£, phone |
| isActive | boolean | ‚ùå | true | L·ªçc active/inactive |

**Request Example:**
```http
GET /patients?page=0&size=10&search=Nguy·ªÖn
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Success Response (200 OK):**
```json
{
  "content": [
    {
      "patientId": "aa0e8400-e29b-41d4-a716-446655440101",
      "patientCode": "PT001",
      "fullName": "Nguy·ªÖn VƒÉn Khang",
      "firstName": "VƒÉn Khang",
      "lastName": "Nguy·ªÖn",
      "email": "khang.nguyen@email.com",
      "phone": "0911111111",
      "dateOfBirth": "1990-01-15",
      "address": "123 L√™ VƒÉn Vi·ªát, Q9, TPHCM",
      "gender": "MALE",
      "isActive": true,
      "createdAt": "2025-10-08T09:00:00",
      "hasAccount": true
    }
  ],
  "totalElements": 50,
  "totalPages": 5,
  "number": 0,
  "size": 10
}
```

---

### ‚ûï 3.2. T·∫°o B·ªánh Nh√¢n M·ªõi (C√ì ACCOUNT)

**Endpoint:** `POST /patients`  
**Authorization:** ‚úÖ Required  
**Permission:** `CREATE_PATIENT`  
**Description:** T·∫°o b·ªánh nh√¢n v·ªõi account ƒë·ªÉ c√≥ th·ªÉ ƒëƒÉng nh·∫≠p

**Request Body:**
```json
{
  "username": "patient.le.thi.d",
  "password": "Patient@2025",
  "email": "le.thi.d@email.com",
  "firstName": "Th·ªã D",
  "lastName": "L√™",
  "phone": "0944444444",
  "dateOfBirth": "1992-08-25",
  "address": "456 Nguy·ªÖn Th·ªã Minh Khai, Q1, TPHCM",
  "gender": "FEMALE",
  "medicalHistory": "Kh√¥ng c√≥ b·ªánh n·ªÅn",
  "allergies": "Kh√¥ng d·ªã ·ª©ng",
  "emergencyContactName": "L√™ VƒÉn F",
  "emergencyContactPhone": "0955555555"
}
```

**Field Validations:**
| Field | Type | Required | Validation |
|-------|------|----------|------------|
| username | string | ‚ùå* | 3-50 chars (n·∫øu mu·ªën t·∫°o account) |
| password | string | ‚ùå* | Min 8 chars (n·∫øu c√≥ username) |
| email | string | ‚ùå** | Valid email, unique (required n·∫øu c√≥ username) |
| firstName | string | ‚úÖ | Max 50 chars |
| lastName | string | ‚úÖ | Max 50 chars |
| phone | string | ‚ùå | 10-15 digits |
| dateOfBirth | date | ‚ùå | Must be in the past |
| gender | string | ‚ùå | `MALE`, `FEMALE`, `OTHER` |
| medicalHistory | string | ‚ùå | Max 1000 chars |
| allergies | string | ‚ùå | Max 500 chars |

***Note:** N·∫øu mu·ªën patient c√≥ th·ªÉ ƒëƒÉng nh·∫≠p ‚Üí ph·∫£i cung c·∫•p `username` + `password` + `email`

**Success Response (201 Created):**
```json
{
  "patientId": "uuid-generated",
  "patientCode": "PT004",
  "fullName": "L√™ Th·ªã D",
  "email": "le.thi.d@email.com",
  "phone": "0944444444",
  "dateOfBirth": "1992-08-25",
  "gender": "FEMALE",
  "hasAccount": true,
  "createdAt": "2025-10-08T15:00:00"
}
```

---

### ‚ûï 3.3. T·∫°o B·ªánh Nh√¢n M·ªõi (KH√îNG ACCOUNT)

**Endpoint:** `POST /patients`  
**Authorization:** ‚úÖ Required  
**Permission:** `CREATE_PATIENT`  
**Description:** T·∫°o b·ªánh nh√¢n ƒë∆°n gi·∫£n (kh√¥ng th·ªÉ ƒëƒÉng nh·∫≠p)

**Request Body:**
```json
{
  "firstName": "VƒÉn G",
  "lastName": "Ho√†ng",
  "email": "hoang.van.g@email.com",
  "phone": "0966666666",
  "dateOfBirth": "1998-12-01",
  "address": "789 L√™ VƒÉn S·ªπ, Q3, TPHCM",
  "gender": "MALE"
}
```

**Success Response (201 Created):**
```json
{
  "patientId": "uuid-generated",
  "patientCode": "PT005",
  "fullName": "Ho√†ng VƒÉn G",
  "email": "hoang.van.g@email.com",
  "phone": "0966666666",
  "hasAccount": false,
  "createdAt": "2025-10-08T15:30:00"
}
```

---

### üîç 3.4. L·∫•y Th√¥ng Tin Chi Ti·∫øt B·ªánh Nh√¢n

**Endpoint:** `GET /patients/{patientCode}`  
**Authorization:** ‚úÖ Required  
**Permission:** `VIEW_PATIENT`

**Request Example:**
```http
GET /patients/PT001
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Success Response (200 OK):**
```json
{
  "patientId": "aa0e8400-e29b-41d4-a716-446655440101",
  "patientCode": "PT001",
  "fullName": "Nguy·ªÖn VƒÉn Khang",
  "firstName": "VƒÉn Khang",
  "lastName": "Nguy·ªÖn",
  "email": "khang.nguyen@email.com",
  "phone": "0911111111",
  "dateOfBirth": "1990-01-15",
  "address": "123 L√™ VƒÉn Vi·ªát, Q9, TPHCM",
  "gender": "MALE",
  "medicalHistory": "Kh√¥ng c√≥ b·ªánh n·ªÅn",
  "allergies": "Kh√¥ng d·ªã ·ª©ng",
  "emergencyContactName": "Nguy·ªÖn VƒÉn H",
  "emergencyContactPhone": "0977777777",
  "isActive": true,
  "createdAt": "2025-10-08T09:00:00",
  "updatedAt": "2025-10-08T09:00:00",
  "hasAccount": true
}
```

---

### ‚úèÔ∏è 3.5. C·∫≠p Nh·∫≠t Th√¥ng Tin B·ªánh Nh√¢n

**Endpoint:** `PATCH /patients/{patientCode}`  
**Authorization:** ‚úÖ Required  
**Permission:** `UPDATE_PATIENT`

**Request Body:**
```json
{
  "phone": "0999999999",
  "address": "ƒê·ªãa ch·ªâ m·ªõi",
  "medicalHistory": "Th√™m ti·ªÅn s·ª≠ b·ªánh",
  "allergies": "D·ªã ·ª©ng penicillin"
}
```

**Success Response (200 OK):**
```json
{
  "patientId": "aa0e8400-e29b-41d4-a716-446655440101",
  "patientCode": "PT001",
  ...
}
```

---

## 4. ROLE & PERMISSION APIs

### üé≠ 4.1. L·∫•y Danh S√°ch Roles

**Endpoint:** `GET /roles`  
**Authorization:** ‚úÖ Required  
**Permission:** `VIEW_ROLE` ho·∫∑c `ROLE_ADMIN`

**Success Response (200 OK):**
```json
[
  {
    "roleId": "550e8400-e29b-41d4-a716-446655440001",
    "name": "Admin",
    "description": "Qu·∫£n tr·ªã vi√™n h·ªá th·ªëng - To√†n quy·ªÅn",
    "isActive": true,
    "permissions": [
      {
        "permissionId": "660e8400-e29b-41d4-a716-446655440001",
        "resource": "ACCOUNT",
        "action": "CREATE",
        "description": "T·∫°o t√†i kho·∫£n m·ªõi"
      }
    ]
  },
  {
    "roleId": "550e8400-e29b-41d4-a716-446655440002",
    "name": "B√°c sƒ©",
    "description": "B√°c sƒ© nha khoa - Kh√°m v√† ƒëi·ªÅu tr·ªã",
    "isActive": true
  }
]
```

---

### üîë 4.2. L·∫•y Danh S√°ch Permissions

**Endpoint:** `GET /permissions`  
**Authorization:** ‚úÖ Required  
**Permission:** `VIEW_PERMISSION` ho·∫∑c `ROLE_ADMIN`

**Success Response (200 OK):**
```json
[
  {
    "permissionId": "660e8400-e29b-41d4-a716-446655440001",
    "resource": "ACCOUNT",
    "action": "CREATE",
    "description": "T·∫°o t√†i kho·∫£n m·ªõi"
  },
  {
    "permissionId": "660e8400-e29b-41d4-a716-446655440011",
    "resource": "EMPLOYEE",
    "action": "CREATE",
    "description": "T·∫°o nh√¢n vi√™n m·ªõi"
  }
]
```

---

### üè• 4.3. L·∫•y Danh S√°ch Specializations

**Endpoint:** `GET /specializations`  
**Authorization:** ‚úÖ Required (ho·∫∑c Public t√πy thi·∫øt k·∫ø)

**Success Response (200 OK):**
```json
[
  {
    "specializationId": "770e8400-e29b-41d4-a716-446655440001",
    "specializationCode": "SPEC001",
    "specializationName": "Ch·ªânh nha",
    "description": "Orthodontics - Ni·ªÅng rƒÉng, ch·ªânh h√¨nh rƒÉng m·∫∑t",
    "isActive": true
  },
  {
    "specializationId": "770e8400-e29b-41d4-a716-446655440002",
    "specializationCode": "SPEC002",
    "specializationName": "N·ªôi nha",
    "description": "Endodontics - ƒêi·ªÅu tr·ªã t·ªßy, ch·ªØa rƒÉng s√¢u",
    "isActive": true
  }
]
```

---

## 5. COMMON RESPONSES

### ‚úÖ Success Response Structure

```json
{
  "data": { ... },
  "message": "Success",
  "timestamp": "2025-10-08T15:00:00"
}
```

### ‚ùå Error Response Structure (RFC 7807)

```json
{
  "type": "https://dentalclinic.com/problem/error-type",
  "title": "Error Title",
  "status": 400,
  "message": "Detailed error message for i18n",
  "timestamp": "2025-10-08T15:00:00"
}
```

---

## 6. ERROR HANDLING

### Common Error Codes:

| Status Code | Type | Description |
|-------------|------|-------------|
| 400 | Bad Request | Validation error, invalid input |
| 401 | Unauthorized | Missing or invalid token |
| 403 | Forbidden | No permission to access resource |
| 404 | Not Found | Resource not found |
| 409 | Conflict | Duplicate resource (username, email) |
| 500 | Internal Server Error | Server error |

### Error Examples:

**400 - Validation Error:**
```json
{
  "type": "https://dentalclinic.com/problem/validation-failed",
  "title": "Bad Request",
  "status": 400,
  "message": "Username must be between 3 and 50 characters"
}
```

**401 - Unauthorized:**
```json
{
  "type": "https://dentalclinic.com/problem/jwt-validation-failed",
  "title": "Unauthorized",
  "status": 401,
  "message": "Token has expired"
}
```

**403 - Forbidden:**
```json
{
  "type": "https://dentalclinic.com/problem/access-denied",
  "title": "Forbidden",
  "status": 403,
  "message": "You don't have permission to access this resource"
}
```

**404 - Not Found:**
```json
{
  "type": "https://dentalclinic.com/problem/employee-not-found",
  "title": "Not Found",
  "status": 404,
  "message": "Employee not found with code: EMP999"
}
```

**409 - Conflict:**
```json
{
  "type": "https://dentalclinic.com/problem/username-exists",
  "title": "Conflict",
  "status": 409,
  "message": "Username already exists"
}
```

---

## üìå NOTES FOR FRONTEND DEVELOPERS

### 1. **Authentication Flow:**
```
Login ‚Üí Get accessToken + refreshToken
‚Üí Store in localStorage/sessionStorage
‚Üí Add to headers: Authorization: Bearer {accessToken}
‚Üí Auto refresh when token expires (before 15 minutes)
‚Üí Logout ‚Üí Clear tokens + call /auth/logout
```

### 2. **Token Refresh Strategy:**
```javascript
// Refresh token 30 seconds before expiration
setInterval(() => {
  if (tokenWillExpireIn30Seconds()) {
    refreshAccessToken();
  }
}, 10000); // Check every 10 seconds
```

### 3. **Pagination Pattern:**
```javascript
// All list endpoints use same pagination structure
const response = {
  content: [...],      // Array of items
  totalElements: 100,  // Total records in DB
  totalPages: 10,      // Total pages
  number: 0,           // Current page (0-indexed)
  size: 10,            // Items per page
  first: true,         // Is first page?
  last: false          // Is last page?
};
```

### 4. **Permission Checking:**
```javascript
// Check if user has permission
function hasPermission(permission) {
  return user.permissions.includes(permission);
}

// Example:
if (hasPermission('CREATE_EMPLOYEE')) {
  showCreateEmployeeButton();
}
```

### 5. **Role-Based UI:**
```javascript
// Hide/show features based on role
if (user.roles.includes('Admin')) {
  showAdminPanel();
}

if (user.roles.includes('B√°c sƒ©')) {
  showDoctorFeatures();
}
```

---

## üéØ TESTING ACCOUNTS

### Default Credentials (from seed data):

| Username | Password | Role | Description |
|----------|----------|------|-------------|
| admin | DentalClinic@2025 | Admin | Qu·∫£n tr·ªã vi√™n |
| bs.nguyen.van.a | DentalClinic@2025 | B√°c sƒ© | B√°c sƒ© ch·ªânh nha |
| bs.tran.thi.b | DentalClinic@2025 | B√°c sƒ© | B√°c sƒ© n·ªôi nha |
| le.thi.c | DentalClinic@2025 | L·ªÖ t√¢n | L·ªÖ t√¢n |
| pham.van.d | DentalClinic@2025 | K·∫ø to√°n | K·∫ø to√°n |
| patient.nguyen.khang | DentalClinic@2025 | B·ªánh nh√¢n | B·ªánh nh√¢n |
| patient.tran.lan | DentalClinic@2025 | B·ªánh nh√¢n | B·ªánh nh√¢n |

---

## üìû SUPPORT

**Issues?** Contact backend team or check application logs.

**API Changes?** Check this documentation for latest updates.

**Last Updated:** October 8, 2025
